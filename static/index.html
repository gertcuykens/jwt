<!DOCTYPE HTML>
<html>
    <head>
        <title>Jwt</title>
    </head>
    <body>
        <script>
		
			getJwt = function () {
			    var xhr = new XMLHttpRequest();
			    xhr.open('GET', '/getJwt', true);
			    xhr.responseType = 'json';
			    xhr.onload = function(e) {
			      if (this.status == 200) {
			       //console.log(this.getResponseHeader("Authorization"))
			       checkJwt(this.getResponseHeader("Authorization"))
				   jwTiedot(this.getResponseHeader("Authorization"))
			      }
			    };
			    xhr.send();
			}
			
			checkJwt = function (jwt) {
			    var xhr = new XMLHttpRequest();
			    xhr.open('GET', '/checkJwt', true);
			    xhr.setRequestHeader ("Authorization", jwt);
			    xhr.responseType = 'json';
			    xhr.onload = function(e) {
			      if (this.status == 200) {
					
			       //console.log(this.getResponseHeader("Authorization"))
			      }
			    };
			    xhr.send();
			}
			
			jwTiedot = function (jwt) {
			    var xhr = new XMLHttpRequest();
			    xhr.open('GET', '//localhost:8080/all', true);
			    xhr.setRequestHeader ("Authorization", jwt);
			    xhr.responseType = 'json';
			    xhr.onload = function(e) {
			      if (this.status == 200) {
			       //console.log(this.getResponseHeader("Authorization"))
			      }
			    };
			    xhr.send();
			}
		
			getJwt()

        </script>
    </body>
</html>
